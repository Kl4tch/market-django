{% extends 'market/base.html' %}
{#TODO ТАБ характеристик + корзина #}
{% block content %}
    <div class="container">
      <div class="row">


        <div id="carousel" class="carousel slide carousel-fade" data-ride="carousel" style="height: 500px; width: 500px">
        <!-- Индикаторы -->
        <ol class="carousel-indicators" >
            {% if images.count > 1 %}
                {% for image in images%}
                    <li data-target="#carousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %} class="active" {% endif %}></li>
                {% endfor %}
            {% endif %}
        </ol>
        <div class="carousel-inner">

            {% for image in images%}

                {% if forloop.first %}
                    <div class="active carousel-item ">
                {% else %}
                    <div class="carousel-item ">
                {% endif %}

                    <img class="img-fluid" src="{{ image.file.url }}" style="height: 500px;display: block; margin: 0 auto;">
                </div>

            {% endfor %}

        </div>
        {% if images.count > 1 %}
            <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Предыдущий</span>
            </a>
            <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Следующий</span>
            </a>
        {% endif %}
    </div>


          <div class="row col-sm-12 col-md-5 col-lg-6 col-xl-7">
            <button class="btn btn-outline-info" style="width: 100px; height: 100px;" id="add_cart">В корзину</button>
          </div>

      <div class="row col-sm-1 col-md-6 col-lg-5 col-xl-4" style="margin-left: 50px">
          {{ item.text }}
          <br>ПОДРОБНОСТИ:<br>
          {% for filter in filterName %}
              {{ filter.name }}
          {% endfor %}

      {# TODO продумать про ненужные атрибуты #}
          {% for detail in item_detail %}
              {% if not detail.value  %}
                {{ detail.attr.name  }}
                  {% else %}
                  {{ detail.value }}
              {% endif %}
          {% endfor %}
      </div>

      <div class="row col-sm-12 col-md-5 col-lg-6 col-xl-7">
          <div class="form-group">
              <label for="usr">Name:</label>
              <div class="col-md-12">

                  <form method="POST">
                      {% csrf_token %}
                      {{ form.as_p }}

                      <div class="form-group">
                        <textarea class="form-control" name="message" id="message" rows="3" placeholder="Отзыв"></textarea>
                      </div>
                  <button type="submit" class="btn btn-outline-info" style="width: 100px; height: 100px;" id="add_review">Оставить отзыв</button>

                  </form>

                </div>
          </div>

          <br>

          {% include 'market/comments.html' %}
      </div>



      </div>
    </div>

  <script>
        $("#add_cart").click(function () {
          $.ajax({
              url:"add",
              method:"GET"
          })
        });


        $("#add_review").click(function () {
          text23 = $('#message').val();

          $.ajax({
              url: "add_review",
              //method:"GET",
              type: "post",
              data: {text: 'TestPass'}
          })
        });
  </script>

{% endblock %}

